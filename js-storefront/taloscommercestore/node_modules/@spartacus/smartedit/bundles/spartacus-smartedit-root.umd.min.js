!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@spartacus/core"),require("@angular/common"),require("@angular/common/http")):"function"==typeof define&&define.amd?define("@spartacus/smartedit/root",["exports","@angular/core","@spartacus/core","@angular/common","@angular/common/http"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).spartacus=t.spartacus||{},t.spartacus.smartedit=t.spartacus.smartedit||{},t.spartacus.smartedit.root={}),t.ng.core,t.core,t.ng.common,t.ng.common.http)}(this,(function(t,e,r,o,n){"use strict";var i=function(){};i.ɵprov=e.ɵɵdefineInjectable({factory:function(){return e.ɵɵinject(r.Config)},token:i,providedIn:"root"}),i.decorators=[{type:e.Injectable,args:[{providedIn:"root",useExisting:r.Config}]}];var c=function(){function t(t,e,r){this.config=t,this.location=e,this.featureModules=r}return Object.defineProperty(t.prototype,"cmsTicketId",{get:function(){return this._cmsTicketId},enumerable:!1,configurable:!0}),t.prototype.load=function(){this.isLaunchedInSmartEdit()&&this.featureModules.isConfigured("smartEdit")&&this.featureModules.resolveFeature("smartEdit").subscribe()},t.prototype.isLaunchedInSmartEdit=function(){var t=this.location.path().split("?")[0],e=this.location.path().split("?")[1],r=null==e?void 0:e.split("&").find((function(t){return t.startsWith("cmsTicketId=")}));return this._cmsTicketId=null==r?void 0:r.split("=")[1],t.split("/").pop()===this.config.smartEdit.storefrontPreviewRoute&&!!this._cmsTicketId},t}();c.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new c(e.ɵɵinject(i),e.ɵɵinject(o.Location),e.ɵɵinject(r.FeatureModulesService))},token:c,providedIn:"root"}),c.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],c.ctorParameters=function(){return[{type:i},{type:o.Location},{type:r.FeatureModulesService}]};Object.create;function a(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var o,n,i=r.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)c.push(o.value)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return c}Object.create;var s={smartEdit:{storefrontPreviewRoute:"cx-preview",allowOrigin:"localhost:9002"}},u=function(){function t(t){this.service=t}return t.prototype.intercept=function(t,e){return this.service.cmsTicketId&&t.url.includes("/cms/")&&(t=t.clone({setParams:{cmsTicketId:this.service.cmsTicketId}})),e.handle(t)},t}();u.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new u(e.ɵɵinject(c))},token:u,providedIn:"root"}),u.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],u.ctorParameters=function(){return[{type:c}]};var d=[{provide:n.HTTP_INTERCEPTORS,useExisting:u,multi:!0}];function l(t){return function(){t.load()}}var f=function(){};f.decorators=[{type:e.NgModule,args:[{providers:function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t}(d,[r.provideDefaultConfig(s),{provide:e.APP_INITIALIZER,useFactory:l,deps:[c],multi:!0}])}]}],t.SMART_EDIT_FEATURE="smartEdit",t.SmartEditConfig=i,t.SmartEditLauncherService=c,t.SmartEditRootModule=f,t.smartEditFactory=l,t.ɵa=d,t.ɵb=u,t.ɵc=s,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=spartacus-smartedit-root.umd.min.js.map