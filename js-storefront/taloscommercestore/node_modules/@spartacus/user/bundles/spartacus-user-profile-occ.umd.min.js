!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common/http"),require("@angular/core"),require("@spartacus/core"),require("@spartacus/user/profile/core"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@spartacus/user/profile/occ",["exports","@angular/common/http","@angular/core","@spartacus/core","@spartacus/user/profile/core","rxjs","rxjs/operators"],e):e(((r="undefined"!=typeof globalThis?globalThis:r||self).spartacus=r.spartacus||{},r.spartacus.user=r.spartacus.user||{},r.spartacus.user.profile=r.spartacus.user.profile||{},r.spartacus.user.profile.occ={}),r.ng.common.http,r.ng.core,r.core,r.spartacus.user.profile.core,r.rxjs,r.rxjs.operators)}(this,(function(r,e,t,o,s,n,p){"use strict";var i={backend:{occ:{endpoints:{userRegister:"users",userForgotPassword:"forgottenpasswordtokens",userResetPassword:"resetpassword",userUpdateLoginId:"users/${userId}/login",userUpdatePassword:"users/${userId}/password",titles:"titles"}}}},a=function(){function r(r,e,t){this.http=r,this.occEndpoints=e,this.converter=t}return r.prototype.update=function(r,e){var t=this.occEndpoints.isConfigured("userUpdateProfile")?"userUpdateProfile":"user",i=this.occEndpoints.getUrl(t,{userId:r});return e=this.converter.convert(e,s.USER_PROFILE_SERIALIZER),this.http.patch(i,e).pipe(p.catchError((function(r){return n.throwError(o.normalizeHttpError(r))})))},r.prototype.register=function(r){var t=this.occEndpoints.getUrl("userRegister"),i=new e.HttpHeaders({"Content-Type":"application/json"});return i=o.InterceptorUtil.createHeader(o.USE_CLIENT_TOKEN,!0,i),r=this.converter.convert(r,s.USER_SIGN_UP_SERIALIZER),this.http.post(t,r,{headers:i}).pipe(p.catchError((function(r){return n.throwError(o.normalizeHttpError(r))})),this.converter.pipeable(s.USER_PROFILE_NORMALIZER))},r.prototype.registerGuest=function(r,t){var i=this.occEndpoints.getUrl("userRegister"),a=new e.HttpHeaders({"Content-Type":"application/x-www-form-urlencoded"});a=o.InterceptorUtil.createHeader(o.USE_CLIENT_TOKEN,!0,a);var c=(new e.HttpParams).set("guid",r).set("password",t);return this.http.post(i,c,{headers:a}).pipe(p.catchError((function(r){return n.throwError(o.normalizeHttpError(r))})),this.converter.pipeable(s.USER_PROFILE_NORMALIZER))},r.prototype.requestForgotPasswordEmail=function(r){var t=this.occEndpoints.getUrl("userForgotPassword"),s=(new e.HttpParams).set("userId",r),i=new e.HttpHeaders({"Content-Type":"application/x-www-form-urlencoded"});return i=o.InterceptorUtil.createHeader(o.USE_CLIENT_TOKEN,!0,i),this.http.post(t,s,{headers:i}).pipe(p.catchError((function(r){return n.throwError(o.normalizeHttpError(r))})))},r.prototype.resetPassword=function(r,t){var s=this.occEndpoints.getUrl("userResetPassword"),i=new e.HttpHeaders({"Content-Type":"application/json"});return i=o.InterceptorUtil.createHeader(o.USE_CLIENT_TOKEN,!0,i),this.http.post(s,{token:r,newPassword:t},{headers:i}).pipe(p.catchError((function(r){return n.throwError(o.normalizeHttpError(r))})))},r.prototype.updateEmail=function(r,t,s){var i=this.occEndpoints.getUrl("userUpdateLoginId",{userId:r}),a=(new e.HttpParams).set("password",t).set("newLogin",s),c=new e.HttpHeaders({"Content-Type":"application/x-www-form-urlencoded"});return this.http.put(i,a,{headers:c}).pipe(p.catchError((function(r){return n.throwError(o.normalizeHttpError(r))})))},r.prototype.updatePassword=function(r,t,s){var i=this.occEndpoints.getUrl("userUpdatePassword",{userId:r}),a=(new e.HttpParams).set("old",t).set("new",s),c=new e.HttpHeaders({"Content-Type":"application/x-www-form-urlencoded"});return this.http.put(i,a,{headers:c}).pipe(p.catchError((function(r){return n.throwError(o.normalizeHttpError(r))})))},r.prototype.close=function(r){var e=this.occEndpoints.isConfigured("userCloseAccount")?"userCloseAccount":"user",t=this.occEndpoints.getUrl(e,{userId:r});return this.http.delete(t).pipe(p.catchError((function(r){return n.throwError(o.normalizeHttpError(r))})))},r.prototype.loadTitles=function(){var r=this.occEndpoints.getUrl("titles");return this.http.get(r).pipe(p.catchError((function(r){return n.throwError(o.normalizeHttpError(r))})),p.map((function(r){var e;return null!==(e=r.titles)&&void 0!==e?e:[]})),this.converter.pipeableMany(s.TITLE_NORMALIZER))},r}();a.decorators=[{type:t.Injectable}],a.ctorParameters=function(){return[{type:e.HttpClient},{type:o.OccEndpointsService},{type:o.ConverterService}]};var c=function(){};c.decorators=[{type:t.NgModule,args:[{providers:[o.provideDefaultConfig(i),{provide:s.UserProfileAdapter,useClass:a}]}]}],r.OccUserProfileAdapter=a,r.UserProfileOccModule=c,r.defaultOccUserProfileConfig=i,Object.defineProperty(r,"__esModule",{value:!0})}));
//# sourceMappingURL=spartacus-user-profile-occ.umd.min.js.map