import { provideConfig } from '@spartacus/core';
/**
 * Helper function to simplify the creation of static CMS structure (`CmsStructureConfig`).
 * The helper function leverage the `provideConfig`, and is only providing an easy way to
 * generate the cms structure. The function creates a configuration structure for components,
 * page slot and page template. The following example adds a component to a page slot:
 *
 * ```ts
 * provideCmsStructure({
 *   componentId: 'LoginComponent',
 *   pageSlotPosition: 'SiteLogin'
 * })
 * ```
 *
 * @param options.componentId component identifier is used to provide component structure
 * @param options.pageSlotPosition page slot position is used to provide the slot configuration
 * @param options.pageTemplate the page template is used to provide the page slot to the given page template
 * @param options.section the section is used to provide the page slot to the given section
 * @param options.breakpoint the breakpoint is used to provide the page slot for a specific breakpoint
 */
export function provideCmsStructure(options) {
    return provideConfig(Object.assign(Object.assign({}, buildCmsStructure(options)), buildLayoutConfig(options)));
}
/**
 * @private
 */
function buildCmsStructure({ componentId, pageSlotPosition, } = {}) {
    const config = { cmsStructure: {} };
    if (componentId) {
        config.cmsStructure = {
            components: {
                [componentId]: {
                    typeCode: componentId,
                    flexType: componentId,
                },
            },
        };
    }
    if (componentId && pageSlotPosition) {
        config.cmsStructure.slots = {
            [pageSlotPosition]: { componentIds: [componentId] },
        };
    }
    return config;
}
/**
 * @private
 */
function buildLayoutConfig({ pageTemplate, pageSlotPosition, breakpoint, section, } = {}) {
    const layoutConfig = {};
    if (pageTemplate && pageSlotPosition) {
        const pageTemplateSlots = {};
        if (breakpoint) {
            pageTemplateSlots[breakpoint] = {
                slots: [pageSlotPosition],
            };
        }
        else {
            pageTemplateSlots.slots = [pageSlotPosition];
        }
        layoutConfig.layoutSlots = {
            [pageTemplate]: pageTemplateSlots,
        };
    }
    if (section && pageSlotPosition) {
        const sectionSlots = {};
        if (breakpoint) {
            sectionSlots[breakpoint] = { slots: [pageSlotPosition] };
        }
        else {
            sectionSlots.slots = [pageSlotPosition];
        }
        if (layoutConfig.layoutSlots) {
            layoutConfig.layoutSlots[section] = sectionSlots;
        }
        else {
            layoutConfig.layoutSlots = {
                [section]: sectionSlots,
            };
        }
    }
    return layoutConfig;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY21zLXN0cnVjdHVyZS51dGlsLmpzIiwic291cmNlUm9vdCI6IkM6L1VzZXJzL1BhdHJ5ay9EZXNrdG9wL3NwYXJ0YWN1cy9wcm9qZWN0cy9zdG9yZWZyb250bGliL3NyYy8iLCJzb3VyY2VzIjpbImNtcy1zdHJ1Y3R1cmUvdXRpbHMvY21zLXN0cnVjdHVyZS51dGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBc0IsYUFBYSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFJcEU7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQWtCRztBQUNILE1BQU0sVUFBVSxtQkFBbUIsQ0FDakMsT0FBNEI7SUFFNUIsT0FBTyxhQUFhLGlDQUNmLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxHQUMxQixpQkFBaUIsQ0FBQyxPQUFPLENBQUMsRUFDN0IsQ0FBQztBQUNMLENBQUM7QUFFRDs7R0FFRztBQUNILFNBQVMsaUJBQWlCLENBQUMsRUFDekIsV0FBVyxFQUNYLGdCQUFnQixNQUNPLEVBQUU7SUFDekIsTUFBTSxNQUFNLEdBQXVCLEVBQUUsWUFBWSxFQUFFLEVBQUUsRUFBRSxDQUFDO0lBRXhELElBQUksV0FBVyxFQUFFO1FBQ2YsTUFBTSxDQUFDLFlBQVksR0FBRztZQUNwQixVQUFVLEVBQUU7Z0JBQ1YsQ0FBQyxXQUFXLENBQUMsRUFBRTtvQkFDYixRQUFRLEVBQUUsV0FBVztvQkFDckIsUUFBUSxFQUFFLFdBQVc7aUJBQ3RCO2FBQ0Y7U0FDRixDQUFDO0tBQ0g7SUFFRCxJQUFJLFdBQVcsSUFBSSxnQkFBZ0IsRUFBRTtRQUNuQyxNQUFNLENBQUMsWUFBWSxDQUFDLEtBQUssR0FBRztZQUMxQixDQUFDLGdCQUFnQixDQUFDLEVBQUUsRUFBRSxZQUFZLEVBQUUsQ0FBQyxXQUFXLENBQUMsRUFBRTtTQUNwRCxDQUFDO0tBQ0g7SUFDRCxPQUFPLE1BQU0sQ0FBQztBQUNoQixDQUFDO0FBRUQ7O0dBRUc7QUFDSCxTQUFTLGlCQUFpQixDQUFDLEVBQ3pCLFlBQVksRUFDWixnQkFBZ0IsRUFDaEIsVUFBVSxFQUNWLE9BQU8sTUFDZ0IsRUFBRTtJQUN6QixNQUFNLFlBQVksR0FBaUIsRUFBRSxDQUFDO0lBQ3RDLElBQUksWUFBWSxJQUFJLGdCQUFnQixFQUFFO1FBQ3BDLE1BQU0saUJBQWlCLEdBQVEsRUFBRSxDQUFDO1FBQ2xDLElBQUksVUFBVSxFQUFFO1lBQ2QsaUJBQWlCLENBQUMsVUFBVSxDQUFDLEdBQUc7Z0JBQzlCLEtBQUssRUFBRSxDQUFDLGdCQUFnQixDQUFDO2FBQzFCLENBQUM7U0FDSDthQUFNO1lBQ0wsaUJBQWlCLENBQUMsS0FBSyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztTQUM5QztRQUNELFlBQVksQ0FBQyxXQUFXLEdBQUc7WUFDekIsQ0FBQyxZQUFZLENBQUMsRUFBRSxpQkFBaUI7U0FDbEMsQ0FBQztLQUNIO0lBRUQsSUFBSSxPQUFPLElBQUksZ0JBQWdCLEVBQUU7UUFDL0IsTUFBTSxZQUFZLEdBQVEsRUFBRSxDQUFDO1FBQzdCLElBQUksVUFBVSxFQUFFO1lBQ2QsWUFBWSxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxDQUFDO1NBQzFEO2FBQU07WUFDTCxZQUFZLENBQUMsS0FBSyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztTQUN6QztRQUNELElBQUksWUFBWSxDQUFDLFdBQVcsRUFBRTtZQUM1QixZQUFZLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxHQUFHLFlBQVksQ0FBQztTQUNsRDthQUFNO1lBQ0wsWUFBWSxDQUFDLFdBQVcsR0FBRztnQkFDekIsQ0FBQyxPQUFPLENBQUMsRUFBRSxZQUFZO2FBQ3hCLENBQUM7U0FDSDtLQUNGO0lBQ0QsT0FBTyxZQUFZLENBQUM7QUFDdEIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZhbHVlUHJvdmlkZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENtc1N0cnVjdHVyZUNvbmZpZywgcHJvdmlkZUNvbmZpZyB9IGZyb20gJ0BzcGFydGFjdXMvY29yZSc7XG5pbXBvcnQgeyBMYXlvdXRDb25maWcgfSBmcm9tICcuLi8uLi9sYXlvdXQvY29uZmlnL2xheW91dC1jb25maWcnO1xuaW1wb3J0IHsgQ21zU3RydWN0dXJlT3B0aW9ucyB9IGZyb20gJy4vY21zLXN0cnVjdHVyZS5tb2RlbCc7XG5cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIHNpbXBsaWZ5IHRoZSBjcmVhdGlvbiBvZiBzdGF0aWMgQ01TIHN0cnVjdHVyZSAoYENtc1N0cnVjdHVyZUNvbmZpZ2ApLlxuICogVGhlIGhlbHBlciBmdW5jdGlvbiBsZXZlcmFnZSB0aGUgYHByb3ZpZGVDb25maWdgLCBhbmQgaXMgb25seSBwcm92aWRpbmcgYW4gZWFzeSB3YXkgdG9cbiAqIGdlbmVyYXRlIHRoZSBjbXMgc3RydWN0dXJlLiBUaGUgZnVuY3Rpb24gY3JlYXRlcyBhIGNvbmZpZ3VyYXRpb24gc3RydWN0dXJlIGZvciBjb21wb25lbnRzLFxuICogcGFnZSBzbG90IGFuZCBwYWdlIHRlbXBsYXRlLiBUaGUgZm9sbG93aW5nIGV4YW1wbGUgYWRkcyBhIGNvbXBvbmVudCB0byBhIHBhZ2Ugc2xvdDpcbiAqXG4gKiBgYGB0c1xuICogcHJvdmlkZUNtc1N0cnVjdHVyZSh7XG4gKiAgIGNvbXBvbmVudElkOiAnTG9naW5Db21wb25lbnQnLFxuICogICBwYWdlU2xvdFBvc2l0aW9uOiAnU2l0ZUxvZ2luJ1xuICogfSlcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBvcHRpb25zLmNvbXBvbmVudElkIGNvbXBvbmVudCBpZGVudGlmaWVyIGlzIHVzZWQgdG8gcHJvdmlkZSBjb21wb25lbnQgc3RydWN0dXJlXG4gKiBAcGFyYW0gb3B0aW9ucy5wYWdlU2xvdFBvc2l0aW9uIHBhZ2Ugc2xvdCBwb3NpdGlvbiBpcyB1c2VkIHRvIHByb3ZpZGUgdGhlIHNsb3QgY29uZmlndXJhdGlvblxuICogQHBhcmFtIG9wdGlvbnMucGFnZVRlbXBsYXRlIHRoZSBwYWdlIHRlbXBsYXRlIGlzIHVzZWQgdG8gcHJvdmlkZSB0aGUgcGFnZSBzbG90IHRvIHRoZSBnaXZlbiBwYWdlIHRlbXBsYXRlXG4gKiBAcGFyYW0gb3B0aW9ucy5zZWN0aW9uIHRoZSBzZWN0aW9uIGlzIHVzZWQgdG8gcHJvdmlkZSB0aGUgcGFnZSBzbG90IHRvIHRoZSBnaXZlbiBzZWN0aW9uXG4gKiBAcGFyYW0gb3B0aW9ucy5icmVha3BvaW50IHRoZSBicmVha3BvaW50IGlzIHVzZWQgdG8gcHJvdmlkZSB0aGUgcGFnZSBzbG90IGZvciBhIHNwZWNpZmljIGJyZWFrcG9pbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByb3ZpZGVDbXNTdHJ1Y3R1cmUoXG4gIG9wdGlvbnM6IENtc1N0cnVjdHVyZU9wdGlvbnNcbik6IFZhbHVlUHJvdmlkZXIge1xuICByZXR1cm4gcHJvdmlkZUNvbmZpZyh7XG4gICAgLi4uYnVpbGRDbXNTdHJ1Y3R1cmUob3B0aW9ucyksXG4gICAgLi4uYnVpbGRMYXlvdXRDb25maWcob3B0aW9ucyksXG4gIH0pO1xufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGJ1aWxkQ21zU3RydWN0dXJlKHtcbiAgY29tcG9uZW50SWQsXG4gIHBhZ2VTbG90UG9zaXRpb24sXG59OiBDbXNTdHJ1Y3R1cmVPcHRpb25zID0ge30pOiBDbXNTdHJ1Y3R1cmVDb25maWcge1xuICBjb25zdCBjb25maWc6IENtc1N0cnVjdHVyZUNvbmZpZyA9IHsgY21zU3RydWN0dXJlOiB7fSB9O1xuXG4gIGlmIChjb21wb25lbnRJZCkge1xuICAgIGNvbmZpZy5jbXNTdHJ1Y3R1cmUgPSB7XG4gICAgICBjb21wb25lbnRzOiB7XG4gICAgICAgIFtjb21wb25lbnRJZF06IHtcbiAgICAgICAgICB0eXBlQ29kZTogY29tcG9uZW50SWQsXG4gICAgICAgICAgZmxleFR5cGU6IGNvbXBvbmVudElkLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgaWYgKGNvbXBvbmVudElkICYmIHBhZ2VTbG90UG9zaXRpb24pIHtcbiAgICBjb25maWcuY21zU3RydWN0dXJlLnNsb3RzID0ge1xuICAgICAgW3BhZ2VTbG90UG9zaXRpb25dOiB7IGNvbXBvbmVudElkczogW2NvbXBvbmVudElkXSB9LFxuICAgIH07XG4gIH1cbiAgcmV0dXJuIGNvbmZpZztcbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBidWlsZExheW91dENvbmZpZyh7XG4gIHBhZ2VUZW1wbGF0ZSxcbiAgcGFnZVNsb3RQb3NpdGlvbixcbiAgYnJlYWtwb2ludCxcbiAgc2VjdGlvbixcbn06IENtc1N0cnVjdHVyZU9wdGlvbnMgPSB7fSk6IExheW91dENvbmZpZyB7XG4gIGNvbnN0IGxheW91dENvbmZpZzogTGF5b3V0Q29uZmlnID0ge307XG4gIGlmIChwYWdlVGVtcGxhdGUgJiYgcGFnZVNsb3RQb3NpdGlvbikge1xuICAgIGNvbnN0IHBhZ2VUZW1wbGF0ZVNsb3RzOiBhbnkgPSB7fTtcbiAgICBpZiAoYnJlYWtwb2ludCkge1xuICAgICAgcGFnZVRlbXBsYXRlU2xvdHNbYnJlYWtwb2ludF0gPSB7XG4gICAgICAgIHNsb3RzOiBbcGFnZVNsb3RQb3NpdGlvbl0sXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBwYWdlVGVtcGxhdGVTbG90cy5zbG90cyA9IFtwYWdlU2xvdFBvc2l0aW9uXTtcbiAgICB9XG4gICAgbGF5b3V0Q29uZmlnLmxheW91dFNsb3RzID0ge1xuICAgICAgW3BhZ2VUZW1wbGF0ZV06IHBhZ2VUZW1wbGF0ZVNsb3RzLFxuICAgIH07XG4gIH1cblxuICBpZiAoc2VjdGlvbiAmJiBwYWdlU2xvdFBvc2l0aW9uKSB7XG4gICAgY29uc3Qgc2VjdGlvblNsb3RzOiBhbnkgPSB7fTtcbiAgICBpZiAoYnJlYWtwb2ludCkge1xuICAgICAgc2VjdGlvblNsb3RzW2JyZWFrcG9pbnRdID0geyBzbG90czogW3BhZ2VTbG90UG9zaXRpb25dIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlY3Rpb25TbG90cy5zbG90cyA9IFtwYWdlU2xvdFBvc2l0aW9uXTtcbiAgICB9XG4gICAgaWYgKGxheW91dENvbmZpZy5sYXlvdXRTbG90cykge1xuICAgICAgbGF5b3V0Q29uZmlnLmxheW91dFNsb3RzW3NlY3Rpb25dID0gc2VjdGlvblNsb3RzO1xuICAgIH0gZWxzZSB7XG4gICAgICBsYXlvdXRDb25maWcubGF5b3V0U2xvdHMgPSB7XG4gICAgICAgIFtzZWN0aW9uXTogc2VjdGlvblNsb3RzLFxuICAgICAgfTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGxheW91dENvbmZpZztcbn1cbiJdfQ==