import { InjectionToken } from '@angular/core';
import { AuthActions } from '../../../auth/user-auth/store/actions/index';
import { entityProcessesLoaderReducer } from '../../../state/utils/entity-processes-loader/entity-processes-loader.reducer';
import { MULTI_CART_DATA } from '../multi-cart-state';
import { activeCartReducer, cartEntitiesReducer, wishListReducer, } from './multi-cart.reducer';
export function clearMultiCartState(reducer) {
    return function (state, action) {
        if (action.type === AuthActions.LOGOUT) {
            state = undefined;
        }
        return reducer(state, action);
    };
}
export const multiCartMetaReducers = [clearMultiCartState];
export const multiCartReducerToken = new InjectionToken('MultiCartReducers');
export function getMultiCartReducers() {
    return {
        carts: entityProcessesLoaderReducer(MULTI_CART_DATA, cartEntitiesReducer),
        active: activeCartReducer,
        wishList: wishListReducer,
    };
}
export const multiCartReducerProvider = {
    provide: multiCartReducerToken,
    useFactory: getMultiCartReducers,
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiQzovVXNlcnMvUGF0cnlrL0Rlc2t0b3Avc3BhcnRhY3VzL3Byb2plY3RzL2NvcmUvIiwic291cmNlcyI6WyJzcmMvY2FydC9zdG9yZS9yZWR1Y2Vycy9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsY0FBYyxFQUFZLE1BQU0sZUFBZSxDQUFDO0FBRXpELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSw2Q0FBNkMsQ0FBQztBQUUxRSxPQUFPLEVBQUUsNEJBQTRCLEVBQUUsTUFBTSw4RUFBOEUsQ0FBQztBQUM1SCxPQUFPLEVBQWtCLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3RFLE9BQU8sRUFDTCxpQkFBaUIsRUFDakIsbUJBQW1CLEVBQ25CLGVBQWUsR0FDaEIsTUFBTSxzQkFBc0IsQ0FBQztBQUU5QixNQUFNLFVBQVUsbUJBQW1CLENBQ2pDLE9BQTJCO0lBRTNCLE9BQU8sVUFBVSxLQUFLLEVBQUUsTUFBTTtRQUM1QixJQUFJLE1BQU0sQ0FBQyxJQUFJLEtBQUssV0FBVyxDQUFDLE1BQU0sRUFBRTtZQUN0QyxLQUFLLEdBQUcsU0FBUyxDQUFDO1NBQ25CO1FBQ0QsT0FBTyxPQUFPLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQ2hDLENBQUMsQ0FBQztBQUNKLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxxQkFBcUIsR0FBdUIsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0FBRS9FLE1BQU0sQ0FBQyxNQUFNLHFCQUFxQixHQUU5QixJQUFJLGNBQWMsQ0FBbUMsbUJBQW1CLENBQUMsQ0FBQztBQUU5RSxNQUFNLFVBQVUsb0JBQW9CO0lBQ2xDLE9BQU87UUFDTCxLQUFLLEVBQUUsNEJBQTRCLENBQ2pDLGVBQWUsRUFDZixtQkFBbUIsQ0FDcEI7UUFDRCxNQUFNLEVBQUUsaUJBQWlCO1FBQ3pCLFFBQVEsRUFBRSxlQUFlO0tBQzFCLENBQUM7QUFDSixDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sd0JBQXdCLEdBQWE7SUFDaEQsT0FBTyxFQUFFLHFCQUFxQjtJQUM5QixVQUFVLEVBQUUsb0JBQW9CO0NBQ2pDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3Rpb25Ub2tlbiwgUHJvdmlkZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEFjdGlvblJlZHVjZXIsIEFjdGlvblJlZHVjZXJNYXAsIE1ldGFSZWR1Y2VyIH0gZnJvbSAnQG5ncngvc3RvcmUnO1xuaW1wb3J0IHsgQXV0aEFjdGlvbnMgfSBmcm9tICcuLi8uLi8uLi9hdXRoL3VzZXItYXV0aC9zdG9yZS9hY3Rpb25zL2luZGV4JztcbmltcG9ydCB7IENhcnQgfSBmcm9tICcuLi8uLi8uLi9tb2RlbC9jYXJ0Lm1vZGVsJztcbmltcG9ydCB7IGVudGl0eVByb2Nlc3Nlc0xvYWRlclJlZHVjZXIgfSBmcm9tICcuLi8uLi8uLi9zdGF0ZS91dGlscy9lbnRpdHktcHJvY2Vzc2VzLWxvYWRlci9lbnRpdHktcHJvY2Vzc2VzLWxvYWRlci5yZWR1Y2VyJztcbmltcG9ydCB7IE11bHRpQ2FydFN0YXRlLCBNVUxUSV9DQVJUX0RBVEEgfSBmcm9tICcuLi9tdWx0aS1jYXJ0LXN0YXRlJztcbmltcG9ydCB7XG4gIGFjdGl2ZUNhcnRSZWR1Y2VyLFxuICBjYXJ0RW50aXRpZXNSZWR1Y2VyLFxuICB3aXNoTGlzdFJlZHVjZXIsXG59IGZyb20gJy4vbXVsdGktY2FydC5yZWR1Y2VyJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyTXVsdGlDYXJ0U3RhdGUoXG4gIHJlZHVjZXI6IEFjdGlvblJlZHVjZXI8YW55PlxuKTogQWN0aW9uUmVkdWNlcjxhbnk+IHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG4gICAgaWYgKGFjdGlvbi50eXBlID09PSBBdXRoQWN0aW9ucy5MT0dPVVQpIHtcbiAgICAgIHN0YXRlID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gcmVkdWNlcihzdGF0ZSwgYWN0aW9uKTtcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IG11bHRpQ2FydE1ldGFSZWR1Y2VyczogTWV0YVJlZHVjZXI8YW55PltdID0gW2NsZWFyTXVsdGlDYXJ0U3RhdGVdO1xuXG5leHBvcnQgY29uc3QgbXVsdGlDYXJ0UmVkdWNlclRva2VuOiBJbmplY3Rpb25Ub2tlbjxcbiAgQWN0aW9uUmVkdWNlck1hcDxNdWx0aUNhcnRTdGF0ZT5cbj4gPSBuZXcgSW5qZWN0aW9uVG9rZW48QWN0aW9uUmVkdWNlck1hcDxNdWx0aUNhcnRTdGF0ZT4+KCdNdWx0aUNhcnRSZWR1Y2VycycpO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TXVsdGlDYXJ0UmVkdWNlcnMoKTogQWN0aW9uUmVkdWNlck1hcDxNdWx0aUNhcnRTdGF0ZT4ge1xuICByZXR1cm4ge1xuICAgIGNhcnRzOiBlbnRpdHlQcm9jZXNzZXNMb2FkZXJSZWR1Y2VyPENhcnQ+KFxuICAgICAgTVVMVElfQ0FSVF9EQVRBLFxuICAgICAgY2FydEVudGl0aWVzUmVkdWNlclxuICAgICksXG4gICAgYWN0aXZlOiBhY3RpdmVDYXJ0UmVkdWNlcixcbiAgICB3aXNoTGlzdDogd2lzaExpc3RSZWR1Y2VyLFxuICB9O1xufVxuXG5leHBvcnQgY29uc3QgbXVsdGlDYXJ0UmVkdWNlclByb3ZpZGVyOiBQcm92aWRlciA9IHtcbiAgcHJvdmlkZTogbXVsdGlDYXJ0UmVkdWNlclRva2VuLFxuICB1c2VGYWN0b3J5OiBnZXRNdWx0aUNhcnRSZWR1Y2Vycyxcbn07XG4iXX0=